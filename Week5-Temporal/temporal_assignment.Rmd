---
title: "Assignment: Temporal Diversity"
author: "Student Name; Z620: Quantitative Biodiversity, Indiana University"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: pdf_document
geometry: margin=2.54cm
---

## OVERVIEW

In this Assignment, we extend our understanding of diversity from the spatial dimension to the temporal dimension. 

After completing this exercise you will know how to:

1. wrangle a large dataset to visualize and analyze time series data
2. test hypotheses from experiments with temporal data
3. quantify temporal $\beta$-diversity and stability

## Directions:
1. Change "Student Name" on line 3 (above) with your name.
2. Complete as much of the exercise as possible during class; what you do not complete in class will need to be done on your own outside of class.
3. Use the Handout as a guide; it contains a more complete description of data sets along with the proper scripting needed to carry out the exercise.
4. Be sure to **answer the questions** in this exercise document; they also correspond to the Handout.
Space for your answer is provided in this document and indicated by the ">" character.
If you need a second paragraph be sure to start the first line with ">".
5. Before you leave the classroom, **push** this file to your GitHub repo.
6. When you are done wit the Assignment, **Knit** the text and code into a html file.
7. After Knitting, please submit the completed Assignment by creating a **pull request** via GitHub.
Your pull request should include this file *temporal_assignment.Rmd* and the html output of `Knitr` (*temporal_assignment.html*).

## 1) R SETUP

Typically, the first thing you will do in either an R script or an RMarkdown file is setup your environment. 
This includes things such as setting the working directory and loading any packages that you will need.

In the R code chunk below, provide the code to:  

1. clear your R environment,
2. print your current working directory,
3. set your working directory to your "*/Week5-Temporal*" folder, and
4. load the `vegan` R package (be sure to install if needed).  

```{r}




```

## 2) LOADING DATA
### Load dataset
In the R code chunk below, do the following:  

1. load the `portal` dataset from in the "*/Week5/data*" folder, and
2. explore the structure of the dataset.

```{r}




```

***Question 1***:  Describe some of the attributes of the `portal` dataset.  

a.  How many plots are in `portal`?
b.  How many rodent species are there in the `portal` dataset?

> ***Answer 1a***:  
> ***Answer 1b***:  


## 3) WRANGLING THE PORTAL DATASET

In the R code chunk below, do the following:  

1. Create a site-by-species matrix for any year of your choosing.
2. Create a vector of plot_type for sites in the site-by-species matrix.
3. Calculate alpha diversity across the sites for that year.
4. Create a PCoA ordination of your site-by-species matrix 
5. Using the hypothesis testing tools you learned in the beta-diversity module, test the hypothesis that species abundances across sites vary as a factor of treatment type (i.e., plot_type). 

```{r}

```

***Question 2***: Describe how different biodiversity estimates vary among sites.

a. Does richness vary among sites?
b. Do species abundances across sites vary as a factor of treatment type

> ***Answer 2a***:
> ***Answer 2b***:



## 4) TIME SERIES ANALYSIS
In the R code chunk below, do the following:  

1. Create a time-by-species matrix that includes year, month, and plot_id (for a particular treatment)
2. Examine per-hectare rodent abundance using simple moving average smoothing.
3. Test whether your data meets the assumption of stationarity 
4. If it does not, examine and plot time lags using the partial autocorrelation function (PACF) of the ARMA model
5. Use your PACF results to arrive at your full ARMA model

```{r}


```

***Question 3***: Describe the results from your time series analysis.

a. Does the inverse of Simpson's diversity vary among sites?
b. Do species abundances across sites vary as a factor of treatment type?
c. Does your data meet the assumption of stationarity? If not, what does this violation imply?
d. What does the ACF function do and how does it relate to the ARMA model? How does this differ from the autocorrelation function (ACF)?
e. What results can you conclude from your full ARMA model?


> ***Answer 3a***:
> ***Answer 3b***:
> ***Answer 3c***:
> ***Answer 3d***:
> ***Answer 3e***:



## 5) REPEATED MEASURES ANALYSIS OF VARIANCE (RM-ANOVA)
In the R code chunk below, do the following:  

1. Create an appropriate data frame for RM-ANOVA.
2. Calculate Simpson's diversity and plot it as a function of year for the control and rodent plots.
3. Perform RM-ANOVA and construct a F-test

```{r}


```

***Question 4***: Describe the results from your RM-ANOVA.

a. In your own words describe what a RM-ANOVA test is doing
b. Is there a noticeable trend in the inverse of Simpson's diversity over time?
c. What does the result of your F-test tell you? 

> ***Answer 4a***:
> ***Answer 4b***:
> ***Answer 4c***:

## 6) TEMPORAL BETA DIVERSITY

1. Calculate and plot turnover 

```{r}


```

***Question 5***:

a. How does temporal beta diversity relate to spatial beta diversity?
b. What does a change in the rank shift tell you about the community?
c. Interpret the results in the plot of Hellinger distance over time.

> ***Answer 5a***:
> ***Answer 5b***:
> ***Answer 5c***:



## 7) STABILITY
In the R code chunk below, do the following:  

1. Calculate stability for each plot type.
2. Analyze and plot the relationship between average stability and the inverse of Simpson's diversity.

```{r}


```

***Question 6***:

a. Which plot type has the highest stability? What does this tell you about the coefficient of variation.
b. In your own words, describe the concept of synchrony
c. Interpret the results from the biodiversity-stability relationship.

> ***Answer 6a***:
> ***Answer 6b***:
> ***Answer 6c***:




## SYNTHESIS

***Question 7***: Answer the following questions.

a. How does temporal diversity relate to spatial diversity in the biological sense?
b. What are the differences between temporal and spatial autocorrelation? What do you have to take into account for each type of analysis?

> ***Answer 7a***:
> ***Answer 7b***:

